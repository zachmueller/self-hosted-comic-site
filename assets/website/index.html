<!DOCTYPE html>
<html>
<head>
	<title>WhatAComicalLife</title>
	<script src="https://sdk.amazonaws.com/js/aws-sdk-2.1001.0.min.js"></script>
	<script src="https://unpkg.com/amazon-cognito-identity-js@latest/dist/amazon-cognito-identity.min.js"></script>
	<script src="router.js"></script>
	<script src="app.js"></script>
	<style>
		.hidden { display: none; }
		.error { color: red; margin: 10px 0; }
	</style>
</head>
<body>
	<nav>
		<a href="/">Latest</a>
		<!-- Only show upload link if authenticated -->
		<a href="/upload" id="uploadLink" style="display: none;">Upload Comic</a>
		<button id="logoutButton" style="display: none;" onclick="logout()">Logout</button>
	</nav>

	<div id="app">
		<div id="authStatus" style="position: fixed; top: 10px; right: 10px; padding: 5px; background: #f0f0f0;">Auth Status: Checking...</div>

		<!-- Public sections -->
		<div id="comicViewSection" class="page" style="display: none;">
			<h2>Latest</h2>
			<div id="comicDisplay"></div>
		</div>

		<!-- Protected sections -->
		<div id="loginSection" class="page" style="display: none;">
			<h2>Login</h2>
			<button onclick="login()">Login with Cognito</button>
		</div>

		<div id="uploadSection" class="page" style="display: none;">
			<h2>Upload Comic</h2>
			<input type="file" id="fileInput" accept="image/*" multiple>
			<button onclick="uploadFiles()">Upload</button>
			<div id="uploadStatus"></div>
		</div>

		<div id="notFoundSection" class="page" style="display: none;">
			<h2>Page Not Found</h2>
			<p>Sorry, the page you're looking for doesn't exist.</p>
		</div>
	</div>
</body>
</html>